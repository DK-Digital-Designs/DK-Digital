(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();console.warn("Supabase credentials not found. Forms will run in demo mode.");const m=null;function g(){document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",async r=>{r.preventDefault();const o=e.querySelector('button[type="submit"]'),n=o?o.innerText:"Submit";o&&(o.disabled=!0,o.innerText="Sending...");const s=new FormData(e),i=Object.fromEntries(s.entries());if(i.website_sync&&i.website_sync.trim()!==""){console.warn("Bot detected via honeypot."),d(e,"Success! We have received your request.","success"),e.reset();return}const c={};for(const a in i){if(a==="website_sync"||a==="cf-turnstile-response")continue;const l=a.replace(/-/g,"_");c[l]=i[a]}c.submitted_at=new Date().toISOString(),c.page_url=window.location.href,console.log("Form captured (normalized):",c);try{if(!m)throw new Error("Supabase not initialized (Running in demo mode)");const a=(e.id==="contactForm","enquiries"),{error:l}=await m.from("enquiries").insert([c]);if(l)throw l;d(e,"Success! We have received your request.","success"),e.reset()}catch(a){console.error("Submission error:",a),d(e,"Success! (Demo Mode: Data logged to console)","success"),e.reset()}finally{o&&(o.disabled=!1,o.innerText=n)}})})}function d(t,e,r){const o=t.querySelector(".form-feedback");o&&o.remove();const n=document.createElement("div");n.className=`form-feedback feedback-${r}`,n.innerText=e,Object.assign(n.style,{padding:"1rem",marginTop:"1rem",borderRadius:"4px",textAlign:"center",fontWeight:"500",backgroundColor:"#def7ec",color:"#03543f",border:"1px solid #84e1bc"}),t.appendChild(n),setTimeout(()=>n.remove(),5e3)}const f=document.documentElement;function u(t){f.setAttribute("data-theme",t),localStorage.setItem("dk_theme",t);const e=document.querySelector(".theme-icon");e&&(e.textContent=t==="light"?"☾":"☀")}function p(){const t=localStorage.getItem("dk_theme");if(t==="light"||t==="dark")return u(t);const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;u(e?"dark":"light")}function h(){const t=document.getElementById("progressBar");if(!t)return;const e=()=>{const r=document.documentElement,o=r.scrollTop||document.body.scrollTop,n=(r.scrollHeight||document.body.scrollHeight)-r.clientHeight,s=n>0?o/n*100:0;t.style.width=`${s}%`};e(),window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e)}function b(){const t=document.getElementById("backToTop");if(!t)return;const e=()=>{const r=window.scrollY||document.documentElement.scrollTop;t.classList.toggle("show",r>600)};e(),window.addEventListener("scroll",e,{passive:!0}),t.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"}))}function v(){const t=document.getElementById("navToggle"),e=document.getElementById("primaryNav");if(!t||!e)return;const r=()=>{e.classList.remove("open"),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-label","Open menu")};t.addEventListener("click",()=>{const o=e.classList.toggle("open");t.setAttribute("aria-expanded",String(o)),t.setAttribute("aria-label",o?"Close menu":"Open menu")}),e.querySelectorAll("a").forEach(o=>o.addEventListener("click",r)),window.addEventListener("keydown",o=>{o.key==="Escape"&&r()})}function y(){const t=document.getElementById("testiTrack"),e=document.getElementById("testiPrev"),r=document.getElementById("testiNext");if(!t||!e||!r)return;const o=Array.from(t.children);let n=0;const s=c=>{n=(c+o.length)%o.length,t.style.transform=`translateX(-${n*100}%)`};e.addEventListener("click",()=>s(n-1)),r.addEventListener("click",()=>s(n+1));let i=setInterval(()=>s(n+1),6500);[e,r,t].forEach(c=>{c.addEventListener("mouseenter",()=>clearInterval(i)),c.addEventListener("mouseleave",()=>i=setInterval(()=>s(n+1),6500))})}function w(){const t=document.getElementById("year");t&&(t.textContent=String(new Date().getFullYear()))}function E(){const t=new IntersectionObserver(e=>{e.forEach(r=>{r.isIntersecting&&(r.target.classList.add("active"),t.unobserve(r.target))})},{threshold:.1});document.querySelectorAll(".reveal").forEach(e=>t.observe(e))}document.addEventListener("DOMContentLoaded",()=>{p(),document.getElementById("themeToggle")?.addEventListener("click",()=>{const t=f.getAttribute("data-theme")||"light";u(t==="light"?"dark":"light")}),h(),b(),v(),y(),w(),g(),E()});
